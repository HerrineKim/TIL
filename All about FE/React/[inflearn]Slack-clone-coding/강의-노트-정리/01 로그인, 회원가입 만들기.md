# 01 로그인, 회원가입 만들기

## 01-1 회원가입 페이지 만들기

### `useCallback()`

useCallback은 useMemo와 비슷한 Hook이다. useMemo는 특정 결괏값을 재사용할 때 사용하는 반면, useCallback은 특정 함수를 새로 만들지 않고 재사용하고 싶을 때 사용하는 함수이다.

#### useCallback 사용법

```react
const memoizedCallback = useCallback(function, deps);
```

useCallback은 첫 번째 인자로 넘어온 함수를, 두 번째 인자로 넘어온 배열 형태의 함수 실행 조건의 값이 변경될 때까지 저장해놓고 재사용할 수 있게 해준다.

예를 들어 리액트 컴포넌트 안에 함수가 선언되어있을 때 이 함수는 해당 컴포넌트가 렌더링 될 때마다 새로운 함수가 생성되는데, useCallback을 사용하면 해당 컴포넌트가 렌더링 되더라도 그 함수가 의존하는 값(deps)들이 바뀌지 않는 한 기존 함수를 재사용할 수 있다.



**주의 할 점은 useCallback 두번째 파라미터의 배열 값에 함수가 재 생성할 기준을 할당 해야한다는 것이다. onSave 함수내의 console.log(name)은 몇 번이 호출되어도 '' 빈 문자열만 출력된다.** 

**-> onSave 함수 생성당시 name 은 '' 빈값 이었기 때문.**

**따라서 onSave 안에서 다른 변수들을 참조하게 된다면, 그 변수들을 useCallback 두번째 파라미터 배열값으로 넣어준다. 그럼 이제 onSave 함수는 name이 바뀔때만 재 생성하게 된다.**

```react
const onSave = useCallback(() => {
    console.log(name);
}, [name]);//name이 변경될 때에만 함수 재생성.
```



## 01-2 커스텀 훅 만들기

- 함수의 중복 제거(email, nickname)
- 섣불리 중복을 제거하려고 하지 말아야 한다.



### `hooks\useInput.ts`

- useState를 이용해 useInput hooks를 만든다.

- TS는 매개변수의 타입은 잘 추론하지 못한다. 그래서 꼭 명시해주어야 한다. (인라인 콜백함수 제외)
- initialData: any 혹은 T(제너릭)를 사용해 에러를 막는다.
  - 제너릭: 인풋값의 타입을 정해주면 리턴값의 타입도 자동으로 동일하게 판단한다.

- Dispatch: useState의 set 함수의 TS에서의 타입
  - https://basemenks.tistory.com/241



```typescript
import { Dispatch, SetStateAction, useCallback, useState } from 'react';

type Handler = (e: any) => void;
type ReturnTypes<T = any> = [T, Handler, Dispatch<SetStateAction<T>>];
const useInput = <T = any>(initialValue: T): ReturnTypes<T> => {
  const [value, setValue] = useState(initialValue);
  const handler = useCallback((e) => {
    setValue(e.target.value);
  }, []);
  return [value, handler, setValue];
};

export default useInput;
```

