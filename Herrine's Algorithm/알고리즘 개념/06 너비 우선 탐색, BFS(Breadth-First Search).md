# 06 BFS(Breadth-First Search), 너비 우선 탐색

## 06-1 BFS 알고리즘이란?

**BFS(Breadth-First Search)**란 **너비 우선 탐색**이라고도 불리며 그래프에서 시작 노드에 인접한 노드부터 탐색하는 알고리즘이다.

BFS 알고리즘은 언제 사용하면 좋을까? BFS 알고리즘은 주로 그래프에서 모든 간선의 비용이 동일한 조건에서 최단 거리를 구하는 문제를 효과적으로 해결할 수 있다. 그리고 "미로를 빠져나가는 최단 거리(경로)"를 구하는 문제 등에서 효과적으로 활용할 수 있는 알고리즘이기도 하다.



## 06-2 BFS 동작 과정

BFS 알고리즘의 동작 과정을 이해하기 위해서는 먼저 그래프 자료구조와 큐 자료구조에 대해 이해할 필요가 있다.

BFS 알고리즘은 그래프에서 가까운 노드부터 우선적으로 탐색한다는 점에서, 선입선출 방식의 큐(Queue) 자료구조를 활용한다. 즉, 인접한 노드를 반복적으로 큐에 삽입하고 먼저 삽입된 노드부터 차례로 큐에서 꺼내도록 알고리즘을 작성하면 된다. BFS 알고리즘의 구체적인 동작 과정은 아래와 같다.

1️⃣ 탐색 시작 노드 정보를 큐에 삽입하고 ***방문 처리**한다.
2️⃣ 큐에서 노드를 꺼내 방문하지 않은 인접 노드 정보를 모두 큐에 삽입하고 방문 처리한다.
3️⃣ 2번의 과정을 더 이상 수행할 수 없을 때까지 반복한다.

여기서 ***방문 처리**란 탐색한 노드를 재방문하지 않도록 구분하는 것이다. 즉, 큐에 한 번이라도 삽입된 노드를 다시 삽입하지 않도록 체크하는 것이다.

 

> https://heytech.tistory.com/56

이제 아래 **그림 1** 과 같은 그래프 예시를 통해 BFS 동작 과정을 알아보겠습니다. 노드 1을 시작 노드로 설정하겠습니다. 일반적으로 인접한 노드가 2개 이상인 경우에는 해당 노드들 중 번호가 낮은 노드부터 처리합니다.



![img](06%20%EB%84%88%EB%B9%84%20%EC%9A%B0%EC%84%A0%20%ED%83%90%EC%83%89,%20BFS(Breadth-First%20Search).assets/img.png)




**편의상 현재 큐에서 꺼내 처리 중인 노드는 파란색으로, 방문 처리한 노드는 회색으로 표시하겠습니다.**

(1) 시작 노드인 노드 1을 큐에 삽입하고 방문 처리합니다.



![img-16563011009872](06%20%EB%84%88%EB%B9%84%20%EC%9A%B0%EC%84%A0%20%ED%83%90%EC%83%89,%20BFS(Breadth-First%20Search).assets/img-16563011009872.png)



(2) 큐에서 노드 1을 꺼내고 노드 1과 인접한 노드 2, 3을 큐에 삽입하고 방문 처리합니다.



![img-16563011025944](06%20%EB%84%88%EB%B9%84%20%EC%9A%B0%EC%84%A0%20%ED%83%90%EC%83%89,%20BFS(Breadth-First%20Search).assets/img-16563011025944.png)



(3) 큐에서 노드 2를 꺼내고 노드 2와 인접한 노드 8을 큐에 삽입하고 방문 처리합니다.



![img-16563011039486](06%20%EB%84%88%EB%B9%84%20%EC%9A%B0%EC%84%A0%20%ED%83%90%EC%83%89,%20BFS(Breadth-First%20Search).assets/img-16563011039486.png)



(4) 큐에서 노드 3을 꺼내고 노드 3과 인접한 노드 4, 5를 큐에 삽입하고 방문 처리합니다.



![img-16563011060348](06%20%EB%84%88%EB%B9%84%20%EC%9A%B0%EC%84%A0%20%ED%83%90%EC%83%89,%20BFS(Breadth-First%20Search).assets/img-16563011060348.png)



(5) 큐에서 노드 8을 꺼내고 노드 8과 인접한 노드 6, 7을 큐에 삽입하고 방문 처리합니다.



![img-165630110810710](06%20%EB%84%88%EB%B9%84%20%EC%9A%B0%EC%84%A0%20%ED%83%90%EC%83%89,%20BFS(Breadth-First%20Search).assets/img-165630110810710.png)



(6) 그래프 내 노드에서 방문하지 않은 노드가 없으므로 큐에서 모든 노드를 차례대로 꺼냅니다.



![img-165630110997212](06%20%EB%84%88%EB%B9%84%20%EC%9A%B0%EC%84%A0%20%ED%83%90%EC%83%89,%20BFS(Breadth-First%20Search).assets/img-165630110997212.png)



결과적으로 노드의 탐색 순서, 즉 큐에 삽입한 순서는 다음과 같습니다.
**1 -> 2 -> 3 -> 8 -> 4 -> 5 -> 6 -> 7**



## 06-3 BFS 파이썬 구현

이제 앞서 살펴본 예시 그래프를 기반으로 BFS 알고리즘을 통해 탐색하는 과정을 파이썬을 통해 실제로 구현해 보자. BFS 알고리즘은 큐 자료구조에 기초하기 때문에 deque 라이브러리를 활용하여 구현하며 시간 복잡도는 *O(N)* 의 시간이 소요된다. 



```python
# deque 라이브러리 불러오기
from collections import deque

# BFS 메서드 정의
def bfs (graph, node, visited):
    # 큐 구현을 위한 deque 라이브러리 활용
    queue = deque([node])
    # 현재 노드를 방문 처리
    visited[node] = True
    
    # 큐가 완전히 빌 때까지 반복
    while queue:
        # 큐에 삽입된 순서대로 노드 하나 꺼내기
        v = queue.popleft()
        # 탐색 순서 출력
        print(v, end = ' ')
        # 현재 처리 중인 노드에서 방문하지 않은 인접 노드를 모두 큐에 삽입
        for i in graph[v]:
            if not (visited[i]):
                queue.append(i)
                visited[i] = True
                
graph = [
    [],
    [2, 3],
    [1, 8],
    [1, 4, 5],
    [3, 5],
    [3, 4],
    [7, 8],
    [6, 8],
    [2, 6, 7]
]

# 노드별로 방문 정보를 리스트로 표현
visited = [False] * 9

# 정의한 BFS 메서드 호출(노드 1을 탐색 시작 노드로 설정)
bfs(graph, 1, visited)
```

**실행결과**

```python
1 2 3 8 4 5 6 7
```